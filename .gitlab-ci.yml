image: ubuntu

variables:
  GOVERSION: "1.10"

# Used to install the needed software in the container
before_script:
# Install all tools needed for the build
  - apt update
  - apt install wget -y
  - apt install curl -y
  - apt install make -y
  - apt install build-essential -y
# Install Go
  - wget https://dl.google.com/go/go$GOVERSION.linux-amd64.tar.gz
  - tar -C /usr/local -xzf go$GOVERSION.linux-amd64.tar.gz
  - export PATH=$PATH:/usr/local/go/bin
  - export GOPATH=/build/go
  - go version
  - go env
# Install dep (Go)
  - mkdir -p $GOPATH/bin
  - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
# Install Nodejs (npm)
  - curl -sL https://deb.nodesource.com/setup_9.x | bash -
  - apt install nodejs -y
  - npm version
# Install yarn
  - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -
  - echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list
  - apt update
  - apt install yarn -y

build:
  script: make build